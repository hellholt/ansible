---
- name: 'Install yt-dlp.'
  ansible.builtin.pip:
    name: 'yt-dlp'

- name: 'Set up YouTube cron job.'
  become: yes
  become_user: "{{ sh_normal_user_name }}"
  ansible.builtin.cron:
    name: 'download-new-videos'
    special_time: 'weekly'
    job: |
      /bin/bash -lc 'yt_download_new /mnt/youtube'

- name: 'Set up rsync cron job.'
  become: yes
  become_user: "{{ sh_normal_user_name }}"
  ansible.builtin.cron:
    name: 'sync-videos'
    special_time: 'daily'
    job: |
      /bin/bash -lc 'rsync --rsync-path=/volume1/@appstore/synocli-net/bin/rsync --archive --human-readable --verbose --whole-file /mnt/youtube/* uller:/volume1/Video/YouTube/'
